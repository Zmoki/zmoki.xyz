---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard, { type Props as PostCardProps } from "../components/PostCard.astro";
import { getCollection } from "astro:content";

export const publishDate = new Date("2025-09-09");
export const contentModifiedDate = new Date("2025-09-10");

// Get all posts from the feed collection
const allPosts = await getCollection("feed");

// Sort posts by publish date (newest first)
const sortedPosts = allPosts.sort(
  (a: PostCardProps, b: PostCardProps) =>
    b.data.publishDate.getTime() - a.data.publishDate.getTime(),
);
---

<BaseLayout
  title="Digital Garden of Zarema Khalilova"
  description="A personal collection of art, research, and creative projects from a neurodivergent developer and artist. A space for curiosity, not a niche."
>
  <!-- Hero Section -->
  <section
    class="bg-myblue-500 mb-4 space-y-4 rounded-xl px-8 py-20 text-2xl font-light text-white shadow-sm"
  >
    <h1 class="mb-6 text-8xl font-semibold">Digital Garden</h1>
    <p>
      I'm Zarema, and this is my digital garden. A user manual for a brain that works differently. A
      living collection of creative projects and deep dives where all my interests connect.
    </p>
  </section>

  <!-- Posts List -->
  <section class="rounded-xl bg-slate-200 px-8 py-12 shadow-sm">
    <h2 class="pb-12 text-6xl font-semibold">Recent Posts</h2>

    {
      sortedPosts.length === 0 ? (
        <div class="py-12 text-center">
          <p class="text-gray-500">No posts yet. Check back soon!</p>
        </div>
      ) : (
        <div class="grid grid-flow-dense grid-cols-2 gap-6">
          {sortedPosts.map((post: PostCardProps) => (
            <article class="overflow-hidden rounded-lg bg-white shadow-sm">
              <PostCard {...post} />
            </article>
          ))}
        </div>
      )
    }
  </section>
</BaseLayout>
