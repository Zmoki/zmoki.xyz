---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";
import { getCollection, type CollectionEntry } from "astro:content";

export const publishDate = new Date("2025-09-09");
export const contentModifiedDate = new Date("2025-09-10");

// Get all posts from the feed collection
const allPosts: CollectionEntry<"feed">[] = await getCollection("feed");

// Sort posts by publish date (newest first)
const sortedPosts = allPosts.sort((a, b) => b.data.order - a.data.order);
---

<BaseLayout
  title="Digital Garden of Zarema Khalilova"
  description="A personal collection of art, research, and creative projects from a neurodivergent developer and artist. A space for curiosity, not a niche."
  showRecentPosts={false}
>
  <!-- Hero Section -->
  <section
    class="mb-4 space-y-4 rounded-xl bg-[#0098f2] px-4 py-8 font-light text-slate-50 shadow-md md:px-8 md:py-16 lg:py-20"
  >
    <h1 class="mb-6 text-6xl font-semibold md:text-7xl">Digital Garden</h1>
    <p class="text-2xl md:text-3xl">
      A living collection of creative projects and deep dives where all my interests connect.
    </p>
  </section>

  <!-- Posts List -->
  <section class="pt-2 md:pt-4">
    <h2 class="px-4 pb-8 text-5xl font-semibold md:px-8 md:text-6xl">Posts</h2>

    {
      sortedPosts.length === 0 ? (
        <p>No posts yet. Check back soon!</p>
      ) : (
        <div class="grid grid-flow-dense grid-cols-1 gap-6">
          {sortedPosts.map((post: CollectionEntry<"feed">) => (
            <PostCard {...post} />
          ))}
        </div>
      )
    }
  </section>
</BaseLayout>
